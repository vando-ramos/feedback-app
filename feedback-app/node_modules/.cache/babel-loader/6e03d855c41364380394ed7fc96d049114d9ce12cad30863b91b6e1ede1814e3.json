{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, withModifiers as _withModifiers, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-4xl font-black text-gray-800\"\n}, \" Sign up \", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"mt-16\"\n};\nconst _hoisted_4 = {\n  class: \"block\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-lg font-medium text-gray-800\"\n}, \"Name\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  key: 0,\n  class: \"block font-medium text-brand-danger\"\n};\nconst _hoisted_7 = {\n  class: \"block mt-9\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-lg font-medium text-gray-800\"\n}, \"Email\", -1 /* HOISTED */);\nconst _hoisted_9 = {\n  key: 0,\n  class: \"block font-medium text-brand-danger\"\n};\nconst _hoisted_10 = {\n  class: \"block mt-9\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-lg font-medium text-gray-800\"\n}, \"Password\", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  key: 0,\n  class: \"block font-medium text-brand-danger\"\n};\nconst _hoisted_13 = [\"disabled\"];\nconst _hoisted_14 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_icon = _resolveComponent(\"icon\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.close && $setup.close(...args)),\n    class: \"text-4xl text-gray-600 focus:outline-none\"\n  }, \" Ã— \")]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $setup.handleSubmit && $setup.handleSubmit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"label\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.state.name.value = $event),\n    type: \"email\",\n    class: _normalizeClass([{\n      'border-brand-danger': !!$setup.state.name.errorMessage\n    }, \"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\"]),\n    placeholder: \"Enter your name\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.state.name.value]]), !!$setup.state.name.errorMessage ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString($setup.state.name.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"label\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.state.email.value = $event),\n    type: \"email\",\n    class: _normalizeClass([{\n      'border-brand-danger': !!$setup.state.email.errorMessage\n    }, \"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\"]),\n    placeholder: \"email@email.com\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.state.email.value]]), !!$setup.state.email.errorMessage ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString($setup.state.email.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"label\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.state.password.value = $event),\n    type: \"password\",\n    class: _normalizeClass([{\n      'border-brand-danger': !!$setup.state.email.errorMessage\n    }, \"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\"]),\n    placeholder: \"Enter Password\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.state.password.value]]), !!$setup.state.password.errorMessage ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, _toDisplayString($setup.state.password.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    disabled: $setup.state.isLoading,\n    type: \"submit\",\n    class: _normalizeClass([{\n      'opacity-50': $setup.state.isLoading\n    }, \"px-8 py-3 mt-10 text-2xl font-bold text-white rounded-full bg-brand-main focus:outline-none transition-all duration-150\"])\n  }, [$setup.state.isLoading ? (_openBlock(), _createBlock(_component_icon, {\n    key: 0,\n    name: \"loading\",\n    class: \"animate-spin\"\n  })) : (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \"Log in\"))], 10 /* CLASS, PROPS */, _hoisted_13)], 32 /* NEED_HYDRATION */)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_hoisted_2","onClick","_cache","args","$setup","close","_hoisted_3","onSubmit","_withModifiers","handleSubmit","_hoisted_4","_hoisted_5","state","name","value","$event","type","_normalizeClass","errorMessage","placeholder","_createElementBlock","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","email","_hoisted_9","_hoisted_10","_hoisted_11","password","_hoisted_12","disabled","isLoading","_createBlock","_component_icon","_hoisted_14"],"sources":["/home/vando/vue-br/feedback-app/src/components/modalSignup/index.vue"],"sourcesContent":["<template>\n  <div class=\"flex justify-between\">\n    <h1 class=\"text-4xl font-black text-gray-800\">\n      Sign up\n    </h1>\n\n    <button @click=\"close\" class=\"text-4xl text-gray-600 focus:outline-none\">\n      &times;\n    </button>\n  </div>\n\n  <div class=\"mt-16\">\n    <form @submit.prevent=\"handleSubmit\">\n      <label class=\"block\">\n        <span class=\"text-lg font-medium text-gray-800\">Name</span>\n        <input v-model=\"state.name.value\" type=\"email\" :class=\"{'border-brand-danger': !!state.name.errorMessage}\"\n          class=\"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\" placeholder=\"Enter your name\"\n        >\n        <span v-if=\"!!state.name.errorMessage\" class=\"block font-medium text-brand-danger\">\n          {{ state.name.errorMessage }}\n        </span>\n      </label>\n\n      <label class=\"block mt-9\">\n        <span class=\"text-lg font-medium text-gray-800\">Email</span>\n        <input v-model=\"state.email.value\" type=\"email\" :class=\"{'border-brand-danger': !!state.email.errorMessage}\"\n          class=\"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\" placeholder=\"email@email.com\"\n        >\n        <span v-if=\"!!state.email.errorMessage\" class=\"block font-medium text-brand-danger\">\n          {{ state.email.errorMessage }}\n        </span>\n      </label>\n\n      <label class=\"block mt-9\">\n        <span class=\"text-lg font-medium text-gray-800\">Password</span>\n        <input v-model=\"state.password.value\" type=\"password\" :class=\"{'border-brand-danger': !!state.email.errorMessage}\"\n          class=\"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded\" placeholder=\"Enter Password\"\n        >\n        <span v-if=\"!!state.password.errorMessage\" class=\"block font-medium text-brand-danger\">\n          {{ state.password.errorMessage }}\n        </span>\n      </label>\n\n      <button :disabled=\"state.isLoading\" type=\"submit\" :class=\"{'opacity-50': state.isLoading}\"\n        class=\"px-8 py-3 mt-10 text-2xl font-bold text-white rounded-full bg-brand-main focus:outline-none transition-all duration-150\"\n      >\n        <icon v-if=\"state.isLoading\" name='loading' class=\"animate-spin\" />\n        <span v-else>Log in</span>\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useField } from 'vee-validate'\nimport { useToast } from 'vue-toastification'\nimport useModal from '../../hooks/useModal'\nimport icon from '../icon'\nimport { validateEmptyAndLength3, validateEmptyAndEmail } from '../../utils/validators'\nimport services from '../../services'\n\nexport default {\n  components: { icon },\n  setup () {\n    const router = useRouter()\n    const modal = useModal()\n    const toast = useToast()\n\n    const {\n      value: emailValue,\n      errorMessage: emailErrorMessage\n    } = useField('email', validateEmptyAndEmail)\n\n    const {\n      value: passwordValue,\n      errorMessage: passwordErrorMessage\n    } = useField('password', validateEmptyAndLength3)\n\n    const state = reactive({\n      hasErrors: false,\n      isLoading: false,\n      name: {\n        value: nameValue,\n        errorMessage: nameErrorMessage\n      },\n      email: {\n        value: emailValue,\n        errorMessage: emailErrorMessage\n      },\n      password: {\n        value: passwordValue,\n        errorMessage: passwordErrorMessage\n      }\n    })\n\n    async function handleSubmit () {\n      try {\n        toast.clear()\n        state.isLoading = true\n        const { data, errors } = await services.auth.login({\n          email: state.email.value,\n          password: state.password.value\n        })\n\n        if (!errors) {\n          window.localStorage.setItem('token', data.token)\n          state.isLoading = false\n          router.push({ name: 'feedbacks' })\n          state.isLoading = false\n          modal.close()\n          return\n        }\n\n        if (errors.status === 404) {\n          toast.error('Email not found!')\n        }\n\n        if (errors.status === 401) {\n          toast.error('Invalid email or password!')\n        }\n\n        if (errors.status === 400) {\n          toast.error('Login error!')\n        }\n\n        state.isLoading = false\n      } catch (error) {\n        state.isLoading = false\n        state.hasErrors = !!error\n        toast.error('Login error!')\n      }\n    }\n\n    return {\n      state,\n      close: modal.close,\n      handleSubmit\n    }\n  }\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}